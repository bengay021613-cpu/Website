<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>QuÃ  táº·ng nÃ¨ ğŸ’</title>

<style>
body{
    margin:0;
    height:100vh;
    overflow:hidden;
    font-family:Arial,sans-serif;
    background:linear-gradient(-45deg,#ff9a9e,#fad0c4,#ffd1dc,#ffb6c1);
    background-size:400% 400%;
    animation:bg 10s ease infinite;
    text-align:center;
}
@keyframes bg{
    0%{background-position:0% 50%}
    50%{background-position:100% 50%}
    100%{background-position:0% 50%}
}

.box{
    background:white;
    width:400px;
    margin:120px auto;
    padding:30px;
    border-radius:20px;
    box-shadow:0 10px 25px rgba(0,0,0,.25);
    animation:pop .8s ease;
}
@keyframes pop{
    from{transform:scale(.7);opacity:0}
    to{transform:scale(1);opacity:1}
}

button{
    padding:12px 20px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    margin:10px;
    font-size:16px;
    transition:.3s;
}
button:hover{transform:scale(1.1)}
.yes{background:#ff69b4;color:white}
.no{background:#d3d3d3}

.gift{
    font-size:90px;
    cursor:pointer;
    animation:shake 1.5s infinite;
}
@keyframes shake{
    0%,100%{transform:rotate(0)}
    25%{transform:rotate(6deg)}
    75%{transform:rotate(-6deg)}
}

/* tim bay ná»n */
.heart{
    position:absolute;
    bottom:-20px;
    font-size:22px;
    animation:heartFly 6s linear forwards;
}
@keyframes heartFly{
    to{transform:translateY(-110vh) scale(1.6);opacity:0}
}

/* phÃ¡o hoa */
.spark{
    position:absolute;
    width:6px;
    height:6px;
    border-radius:50%;
    pointer-events:none;
}

/* chá»¯ cháº¡y */
.marquee{
    position:fixed;
    bottom:20px;
    left:-100%;
    width:100%;
    font-size:22px;
    font-weight:bold;
    color:#fff;
    text-shadow:0 0 12px #ff69b4;
    animation:runText 10s linear infinite;
}
@keyframes runText{
    from{left:-100%}
    to{left:100%}
}
</style>
</head>

<body>

<div class="box" id="content">
<h2>ğŸ‰ ChÃºc má»«ng báº¡n Ä‘Ã£ nháº­n Ä‘Æ°á»£c má»™t pháº§n quÃ  ğŸ‰</h2>
<div class="gift" onclick="openGift()">ğŸ</div>
<p>(Nháº¥n vÃ o mÃ³n quÃ  Ä‘i nÃ¨)</p>
</div>

<script>
let refuseCount=0;
let marqueeShown=false;
let fireMode=0; // 0: trÃ²n, 1: tim, 2: LOVE

function openGift(){
    content.innerHTML=`
    <h2>ğŸ’Œ Báº¡n cÃ³ muá»‘n Ä‘i chÆ¡i há»™i tráº¡i vá»›i mÃ¬nh khÃ´ng?</h2>
    <button class="yes" onclick="yes()">ğŸ’– Äá»“ng Ã½</button>
    <button class="no" onclick="no()">ğŸ’” KhÃ´ng Ä‘á»“ng Ã½</button>`;
}

function no(){
    refuseCount++;
    let m=[
        "ğŸ¥º Buá»“n váº­yâ€¦ cho mÃ¬nh xin chá»n láº¡i nha",
        "ğŸ˜¢ Thiá»‡t luÃ´n Ã¡? MÃ¬nh mong láº¯m Ä‘Ã³â€¦",
        "ğŸ¥¹ Tá»« chá»‘i hoÃ i váº­y lÃ  mÃ¬nh buá»“n thiá»‡t Ã¡",
        "ğŸ˜¤ Äi há»™i tráº¡i 1 mÃ¬nh buá»“n láº¯m Ä‘Ã³, chá»n láº¡i Ä‘i mÃ  ğŸ˜"
    ];
    content.innerHTML=`
    <h2>${m[Math.min(refuseCount-1,m.length-1)]}</h2>
    <button onclick="openGift()">ğŸ‘‰ Chá»n láº¡i nÃ¨</button>`;
}

function yes(){
    startFireworks();
    const lines=[
        "ğŸ’Œ Äang kiá»ƒm tra pháº§n quÃ ...",
        "ğŸ Äang má»Ÿ há»™p quÃ ...",
        "ğŸ’– VÃ  pháº§n thÆ°á»Ÿng cá»§a báº¡n lÃ ...",
        "âœ¨ Má»™t ngÆ°á»i sáº½ Ä‘i há»™i tráº¡i cÃ¹ng báº¡n âœ¨",
        "ğŸ¥° VÃ  sáº½ cÆ°á»i vá»›i báº¡n suá»‘t ngÃ y hÃ´m Ä‘Ã³",
        "ğŸ’ Cáº£m Æ¡n vÃ¬ Ä‘Ã£ chá»n mÃ¬nh nha ğŸ’"
    ];
    let i=0;
    content.innerHTML=`<h2 id="text"></h2>`;
    typeLine(lines,i);
}

function typeLine(lines,i){
    if(i>=lines.length){
        if(!marqueeShown){
            showMarquee();
            marqueeShown=true;
        }
        return;
    }
    let t="",j=0,line=lines[i];
    let typer=setInterval(()=>{
        if(j<line.length){
            t+=line[j++];
            text.innerHTML=t;
        }else{
            clearInterval(typer);
            setTimeout(()=>typeLine(lines,i+1),900);
        }
    },50);
}

/* tim bay ná»n */
setInterval(()=>{
    let h=document.createElement("div");
    h.className="heart";
    h.innerHTML="ğŸ’–";
    h.style.left=Math.random()*100+"vw";
    document.body.appendChild(h);
    setTimeout(()=>h.remove(),6000);
},400);

/* PHÃO HOA */
function startFireworks(){
    let t=setInterval(()=>{
        let x=Math.random()*innerWidth;
        let y=Math.random()*innerHeight*0.6;
        if(fireMode===0) explodeCircle(x,y);
        if(fireMode===1) explodeHeart(x,y);
        if(fireMode===2) explodeLOVE(x,y);
        fireMode=(fireMode+1)%3;
    },600);
    setTimeout(()=>clearInterval(t),6000);
}

function spark(x,y,dx,dy){
    let s=document.createElement("div");
    s.className="spark";
    s.style.left=x+"px";
    s.style.top=y+"px";
    s.style.background=`hsl(${Math.random()*360},100%,60%)`;
    document.body.appendChild(s);
    s.animate([
        {transform:"translate(0,0)",opacity:1},
        {transform:`translate(${dx}px,${dy}px)`,opacity:0}
    ],{duration:900,easing:"ease-out"});
    setTimeout(()=>s.remove(),900);
}

/* trÃ²n */
function explodeCircle(x,y){
    for(let i=0;i<20;i++){
        let a=Math.random()*2*Math.PI;
        let d=90;
        spark(x,y,Math.cos(a)*d,Math.sin(a)*d);
    }
}

/* TIM */
function explodeHeart(x,y){
    for(let t=0;t<Math.PI*2;t+=0.2){
        let r=16*(1-Math.sin(t));
        let dx=r*Math.cos(t)*3;
        let dy=-r*Math.sin(t)*3;
        spark(x,y,dx,dy);
    }
}

/* LOVE */
function explodeLOVE(x,y){
    const text="LOVE";
    [...text].forEach((c,i)=>{
        let d=document.createElement("div");
        d.style.position="absolute";
        d.style.left=x+"px";
        d.style.top=y+"px";
        d.style.color="#ff69b4";
        d.style.fontSize="26px";
        d.style.fontWeight="bold";
        d.innerHTML=c;
        document.body.appendChild(d);
        d.animate([
            {transform:"translate(0,0)",opacity:1},
            {transform:`translate(${(i-1.5)*40}px,-80px)`,opacity:0}
        ],{duration:1200,easing:"ease-out"});
        setTimeout(()=>d.remove(),1200);
    });
}

/* chá»¯ cháº¡y cuá»‘i */
function showMarquee(){
    let mq=document.createElement("div");
    mq.className="marquee";
    mq.innerHTML="ğŸª ChÃºc báº¡n chÆ¡i há»™i tráº¡i tháº­t vui váº» nhaaa ğŸ‰ğŸ’–";
    document.body.appendChild(mq);
}
</script>

</body>
</html>
